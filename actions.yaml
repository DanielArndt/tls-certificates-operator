# Copyright 2022 Canonical Ltd.
# See LICENSE file for licensing details.

generate-self-signed-certificate:
  description: >-
    Generate a certificate along with private key.
    Supported only when the tls-certificate-operator
    is configured to be self-signed.
  params:
    common-name:
      type: string
      description: >-
        CN (Common Name) field of the new certificate
    sans:
      type: string
      description: >-
        Space delimited list of Subject Alternate Name/IP addresse(s).
      default: ''
  required:
    - common-name
  additionalProperties: False

get-all-certificate-requests:
  description: >-
    Get certificate requests from all connected requirer units.

get-certificate-request:
  description: >-
    Get certificate requests from a specific requirer application.
  params:
    relation-id:
      type: string
      description: >-
        ID of the relation between the tls-certificate-operator and the requirer.
  required:
    - relation-id

provide-certificate:
  description: >-
    Provide a certificate to a specific requirer unit.
  params:
    relation-id:
      type: string
      description: >-
        ID of the relation between the tls-certificate-operator and the requirer.
    certificate-signing-request:
      type: string
      description: >-
        The request to which the certificate is being provided.
    certificate:
      type: string
      description: >-
        Base64 encoded TLS certificate (do not use if 'generate-self-signed-certificates' is set to true).
    ca-chain:
      type: string
      description: >-
        Base64 encoded CA chain (do not use if 'generate-self-signed-certificates' is set to true).
        If not provided, the ca-chain will be composed of the application and the ca-certificate.
    ca-certificate:
      type: string
      description: >-
        Base64 encoded CA Certificate (do not use if 'generate-self-signed-certificates' is set to true).
    unit-name:
      type: string
      description: >-
        Name of the unit to which the certificate is being provided.
  required:
    - relation-id
    - certificate-signing-request
    - certificate
    - ca-chain
    - ca-certificate
